<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">

      // defaults
      var uploadProgressDelay = 1000;
      var uploadProgressInterval = 750;

      // hooks
      $(document).ready(function()
      {
	parent.validateHook(function()
	{
	  setTimeout("showUpload();", uploadProgressDelay);
	});
      });

      // upload status
      function showUpload()
      {
	$.getJSON("../index.php?s=" + parent.progressKey, function(data)
	{
	  var pc = parseInt(data['percent']);
	  if(parent.progress)
	  {
	    if(parent.progress.is(':hidden'))
	      parent.progress.slideDown();
	    parent.progress.attr('value', pc);
	    setTimeout("showUpload();", uploadProgressInterval);
	  }
	});
      }

    </script>
  </head>
  <body></body>
</html>
